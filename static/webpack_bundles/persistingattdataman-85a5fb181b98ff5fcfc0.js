!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1063)}({1063:function(t,e,r){t.exports=r(1064)},1064:function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function a(t){return function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(a,o){try{var i=e[a](o),u=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(u).then((function(t){n("next",t)}),(function(t){n("throw",t)}));t(u)}("next")}))}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){o(this,t)}return n(t,null,[{key:"includes",value:function(t,e){return-1!==t.indexOf(e)}}]),t}(),u=function(t,e,r,n){var a=document.querySelector(t);a.addEventListener(e,(function(t){for(var e=a.querySelectorAll(r),o=t.target,i=0;i<e.length;i+=1)for(var u=o,s=e[i];u&&u!==a;){if(u===s)return n.call(s,t);u=u.parentNode}}))},s=function(){function t(){o(this,t),this._allowedAttributes=["email","firstName","lastName","phone","postalCode"],this._dataAtrribute="data-pa",this._dataForm="data-pa-form",this._dataNoSetAtrribute="data-pa-no-set",this._dataNoStoreAtrribute="data-pa-no-store",this._forms=[],this._localStorageKey="PersistingAttributes",this._data=this._getData()}var e;return n(t,[{key:"_checkAttribute",value:function(t){if(!i.includes(this._allowedAttributes,t))throw new Error('Attribute with name "'+t+'" is not allowed.')}},{key:"_getAttribute",value:function(t){var e=this;return a(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e._checkAttribute(t),r.next=3,e._data;case 3:return n=r.sent,r.abrupt("return",n[t]);case 5:case"end":return r.stop()}}),r,e)})))()}},{key:"_getData",value:(e=a(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this._getLocalStorageData())._synced){t.next=14;break}return t.next=4,fetch(window.endpoints.api.persistingAttributes);case 4:if(!(r=t.sent).ok){t.next=13;break}return t.next=8,r.json();case 8:n=t.sent,this._syncData(n),e=this._getLocalStorageData(),t.next=14;break;case 13:throw new Error("Failed to retrieve data from server.");case 14:return t.abrupt("return",e);case 15:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_getLocalStorageData",value:function(){var t=window.localStorage.getItem(this._localStorageKey),e=JSON.parse(t);return e||(e={},this._allowedAttributes.forEach((function(t){e[t]=null})),e._synced=!1),e}},{key:"_setAttribute",value:function(t,e){this._checkAttribute(t);var r=this._getLocalStorageData();r[t]=e,this._setLocalStorageData(r)}},{key:"_setLocalStorageData",value:function(t){var e=JSON.stringify(t);return window.localStorage.setItem(this._localStorageKey,e)}},{key:"_syncData",value:function(t){var e=this._getLocalStorageData();this._allowedAttributes.forEach((function(r){null===e[r]&&(e[r]=t[r])})),e._synced=!0,this._setLocalStorageData(e)}},{key:"addNoSet",value:function(t){t.setAttribute(this._dataNoSetAtrribute,"")}},{key:"addNoStore",value:function(t){t.setAttribute(this._dataNoStoreAtrribute,"")}},{key:"assign",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forms.push(t),this.setAttributes(t,r),t.onsubmit=function(){e.storeAttributes(t,r)}}},{key:"clear",value:function(){window.localStorage.removeItem(this._localStorageKey)}},{key:"init",value:function(){for(var t=document.querySelectorAll("form["+this._dataForm+"]"),e=0;e<t.length;e+=1){var r=t[e];i.includes(this._forms,r)||this.assign(r)}}},{key:"removeNoSet",value:function(t){t.removeAttribute(this._dataNoSetAtrribute)}},{key:"removeNoStore",value:function(t){t.removeAttribute(this._dataNoStoreAtrribute)}},{key:"resync",value:function(){var t=this._getLocalStorageData();t._synced=!1,this._setLocalStorageData(t)}},{key:"setAttributes",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(regeneratorRuntime.mark((function n(){var a,o,i,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.beforeSet&&r.beforeSet(t,r),a=t.querySelectorAll("["+e._dataAtrribute+"]:not(["+e._dataNoSetAtrribute+"])"),o=0;case 3:if(!(o<a.length)){n.next=20;break}if(i=a[o],u=i.getAttribute(e._dataAtrribute),""!==i.value){n.next=17;break}return n.prev=8,n.next=11,e._getAttribute(u);case 11:i.value=n.sent,n.next=17;break;case 14:n.prev=14,n.t0=n.catch(8),console.error(n.t0);case 17:o+=1,n.next=3;break;case 20:r.afterSet&&r.afterSet(t,r);case 21:case"end":return n.stop()}}),n,e,[[8,14]])})))()}},{key:"storeAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.beforeStore&&e.beforeStore(t,e);for(var r=t.querySelectorAll("["+this._dataAtrribute+"]:not(["+this._dataNoStoreAtrribute+"])"),n=0;n<r.length;n+=1){var a=r[n],o=a.getAttribute(this._dataAtrribute),i=a.value;""!==i&&this._setAttribute(o,i)}e.afterStore&&e.afterStore(t,e)}}]),t}();window.PersistingAttributesDataManager=new s,u("body","click",".menu-item-logout",(function(){window.PersistingAttributesDataManager.clear()})),u("body","submit",".login-form",(function(){window.PersistingAttributesDataManager.resync()}))}});